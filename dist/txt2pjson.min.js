!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).txt2pjson=t()}(this,(function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e=function(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}((function(e,t){e.exports=function(e,t){if(null==t&&(t={fuzzy:!0}),/youtu\.?be/.test(e)){var n,r=[/youtu\.be\/([^#\&\?]{11})/,/\?v=([^#\&\?]{11})/,/\&v=([^#\&\?]{11})/,/embed\/([^#\&\?]{11})/,/\/v\/([^#\&\?]{11})/];for(n=0;n<r.length;++n)if(r[n].test(e))return r[n].exec(e)[1];if(t.fuzzy){var o=e.split(/[\/\&\?=#\.\s]/g);for(n=0;n<o.length;++n)if(/^[^#\&\?]{11}$/.test(o[n]))return o[n]}}return null}}));var t={findIndex:(e,t)=>{let n=0;const r=e.split("\n");for(var o=0;o<=t;o++){const e=r[o];if(t===o)return n;""===e&&n++}return n},findRange:(e,t)=>{let n=-1,r=0,o=0;const i=e.split("\n");for(var u=0;u<=i.length;u++){const e=i[u];if(""===e&&n++,t===n)return o=u,{start:r,end:o};""===e&&(r=u+1)}return{start:r,end:o}}};return{parse:t=>{const n={},r=[];return t.split("\n\n").forEach((t=>{const n=t.split("||"),o=n[0],i=n.length>1?n[1].trim().split(","):"";let u={type:"text",text:"# "+o,textVar:"title",scale:4};i&&i.forEach((e=>{const t=e.split(":");u[t[0]]=t[1]}));o.match(/(\.jpg|\.gif|\.png|\.jpeg|\.webp)/gi)&&(u={type:"image",url:o});o.match(/(\.m4v|\.mov|\.mp4|\.webm)/gi)&&(u={type:"video",url:o});o.match(/(\.htm|\.html)/gi)&&(u={type:"embed",url:o});const f=e(o);f&&(u={type:"youtube",url:f}),r.push({blocks:[u]})})),n.scenes=r,n},findIndex:t.findIndex,findRange:t.findRange}}));
